<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS-task2</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css" rel="stylesheet">
    
</head>

<body style="background-color: rgb(152, 179, 228);" onload="tableData()">
    <div class="mt-5">
        <h2
            style="color: red; text-shadow:2px 3px 2px white; text-align: center; font-size: 30px;font-family: poppins;">
            <b>STUDENT INFORMATION</b>
        </h2>
    </div>
    <div class="d-flex justify-content-center mt-4">
        <button type="button" onclick="addButton()" class="btn btn-success">ADD</button>
    </div>
    <div>
        <table id="studentTable" class=" table table-bordered mt-4 text-center mx-auto" style="width: 85%;">
            <thead>
                <tr class="table-primary">
                    <th>S.No</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>DOB</th>
                    <th>Gender</th>
                    <th>Mobile</th>
                    <th>Action</th>
                </tr>
            </thead>
         <tbody id="tableBody"></tbody>
        </table>
    </div>



    
    <script>
        function tableData() {
    let students = JSON.parse(localStorage.getItem("studentdetail")) || [];
    let table = "";
    let data = document.getElementById("studentTable");
    if(students.length>0){
        data.parentElement.style.display = "block";
    }else{
        data.parentElement.style.display = "none";
    }
    for (i = 0; i < students.length; i++) {
        console.log(students);
        table += "<tr><td>" + Number(i + 1) + "</td><td>" + students[i].studname + "</td><td>" + students[i].studmail + "</td><td>" + students[i].studdob +
            "</td><td>" + students[i].studgender + "</td><td>" + students[i].studphone +
            "</td><td>" + '<button class="mx-2" onclick="editButton('+ i +')" style="background:transparent; color:blue; border:hidden;"> <i class="fa-solid fa-pen-to-square"></i></button>' + '<button class="mx-2" onclick="delButton('+ i +')" style="background:transparent; color:red; border:hidden;" ><i class="fa-solid fa-trash"></i></button>' + "</td><tr>";
    }
    document.getElementById("tableBody").innerHTML = table;
}
function addButton() {
    window.location.href = "./index1.html"
}
function editButton(i){
    window.location.href = `index1.html?id=${i}`;
}
function delButton(i){
    let students = JSON.parse(localStorage.getItem("studentdetail")) || [];
    students.splice(i,1);
    console.log(i,students);
    let a = document.getElementById("icon");
            let b = document.getElementById("Extra-Detail");
            let c = document.getElementsByClassName("Extrafield");
            if (c.length > 0) {
                a.remove();
                b.remove();
            }
            else {
                alert("Is it okay for you to delete")
            }
    
    localStorage.setItem("studentdetail", JSON.stringify(students));
    tableData()

}


    </script>






</body>

</html>
